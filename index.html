<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estoque Ylma Cake's | Controle Inteligente</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #8A2BE2;
            --primary-light: #E6D4F9;
            --primary-dark: #6A1B9A;
            --secondary-color: #FF6B8B;
            --accent-color: #9370DB;
            --light-color: #FFFFFF;
            --dark-color: #333333;
            --gray-light: #F5F5F5;
            --gray: #9E9E9E;
            --success-color: #4CAF50;
            --warning-color: #FF9800;
            --danger-color: #F44336;
            --shadow: 0 10px 30px rgba(138, 43, 226, 0.15);
            --shadow-light: 0 5px 15px rgba(138, 43, 226, 0.1);
            --radius: 16px;
            --radius-sm: 8px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f9f5ff 0%, #f0e6ff 100%);
            color: var(--dark-color);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .app-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 30px 40px;
            border-radius: var(--radius);
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 20px;
            z-index: 1;
        }

        .logo-icon {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }

        .logo-text h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .logo-text p {
            font-size: 16px;
            opacity: 0.9;
        }

        .header-info {
            text-align: right;
            z-index: 1;
        }

        .current-date {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 10px;
        }

        .total-products {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: 600;
        }

        /* Main Grid */
        .main-grid {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
        }

        /* Sidebar */
        .sidebar {
            background: var(--light-color);
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
            height: fit-content;
        }

        .nav-menu {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 18px 20px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            background: none;
            text-align: left;
            font-family: 'Inter', sans-serif;
            font-size: 16px;
            font-weight: 500;
            color: var(--dark-color);
        }

        .nav-item:hover {
            background: var(--primary-light);
            color: var(--primary-color);
            transform: translateX(5px);
        }

        .nav-item.active {
            background: var(--primary-color);
            color: white;
            box-shadow: var(--shadow-light);
        }

        .nav-item i {
            width: 24px;
            text-align: center;
            font-size: 20px;
        }

        .quick-stats {
            margin-top: 40px;
            padding-top: 25px;
            border-top: 1px solid var(--gray-light);
        }

        .quick-stats h3 {
            font-size: 18px;
            margin-bottom: 20px;
            color: var(--primary-dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--gray-light);
        }

        .stat-item:last-child {
            border-bottom: none;
        }

        .stat-value {
            font-weight: 700;
            font-size: 18px;
        }

        /* Main Content */
        .main-content {
            background: var(--light-color);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        .content-section {
            display: none;
            padding: 40px;
        }

        .content-section.active-section {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Dashboard */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--light-color), var(--gray-light));
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow-light);
            border-left: 5px solid var(--primary-color);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .stat-card.warning {
            border-left-color: var(--warning-color);
        }

        .stat-card.danger {
            border-left-color: var(--danger-color);
        }

        .stat-card.success {
            border-left-color: var(--success-color);
        }

        .stat-card.accent {
            border-left-color: var(--accent-color);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            font-size: 24px;
            color: white;
        }

        .stat-card .stat-icon {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
        }

        .stat-card.warning .stat-icon {
            background: linear-gradient(135deg, var(--warning-color), #FFB74D);
        }

        .stat-card.danger .stat-icon {
            background: linear-gradient(135deg, var(--danger-color), #E57373);
        }

        .stat-card.success .stat-icon {
            background: linear-gradient(135deg, var(--success-color), #81C784);
        }

        .stat-card.accent .stat-icon {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
        }

        .stat-card h3 {
            font-size: 14px;
            color: var(--gray);
            font-weight: 500;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 10px;
        }

        .stat-change {
            font-size: 14px;
            font-weight: 500;
        }

        .positive {
            color: var(--success-color);
        }

        .negative {
            color: var(--danger-color);
        }

        /* Section Headers */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--gray-light);
        }

        .section-header h2 {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary-dark);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .section-header h2 i {
            color: var(--primary-color);
        }

        /* Buttons */
        .btn {
            padding: 14px 28px;
            border-radius: var(--radius-sm);
            border: none;
            font-family: 'Inter', sans-serif;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            box-shadow: var(--shadow-light);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-secondary {
            background: var(--gray-light);
            color: var(--dark-color);
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-warning {
            background: var(--warning-color);
            color: white;
        }

        .btn-danger {
            background: var(--danger-color);
            color: white;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 14px;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            padding: 0;
            justify-content: center;
            border-radius: 50%;
        }

        /* Filter Bar */
        .filter-bar {
            background: var(--gray-light);
            padding: 20px;
            border-radius: var(--radius-sm);
            margin-bottom: 30px;
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .search-box {
            flex: 1;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 15px 20px 15px 50px;
            border: 2px solid transparent;
            border-radius: var(--radius-sm);
            font-family: 'Inter', sans-serif;
            font-size: 15px;
            transition: all 0.3s ease;
            background: white;
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(138, 43, 226, 0.1);
        }

        .search-box i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }

        .filter-select {
            padding: 15px 20px;
            border: 2px solid transparent;
            border-radius: var(--radius-sm);
            font-family: 'Inter', sans-serif;
            font-size: 15px;
            background: white;
            min-width: 200px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(138, 43, 226, 0.1);
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
            border-radius: var(--radius-sm);
            border: 1px solid var(--gray-light);
            margin-bottom: 30px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 1000px;
        }

        thead {
            background: linear-gradient(135deg, var(--primary-light), white);
        }

        th {
            padding: 20px;
            text-align: left;
            font-weight: 600;
            color: var(--primary-dark);
            border-bottom: 2px solid var(--primary-light);
            white-space: nowrap;
        }

        td {
            padding: 20px;
            border-bottom: 1px solid var(--gray-light);
        }

        tbody tr {
            transition: all 0.3s ease;
        }

        tbody tr:hover {
            background: var(--primary-light);
        }

        /* Status Badges */
        .status-badge {
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 13px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-in-stock {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success-color);
            border: 1px solid rgba(76, 175, 80, 0.3);
        }

        .status-low-stock {
            background: rgba(255, 152, 0, 0.1);
            color: var(--warning-color);
            border: 1px solid rgba(255, 152, 0, 0.3);
        }

        .status-out-of-stock {
            background: rgba(244, 67, 54, 0.1);
            color: var(--danger-color);
            border: 1px solid rgba(244, 67, 54, 0.3);
        }

        .status-not-tracked {
            background: rgba(158, 158, 158, 0.1);
            color: var(--gray);
            border: 1px solid rgba(158, 158, 158, 0.3);
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: none;
            color: white;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .action-btn:hover {
            transform: scale(1.1);
        }

        .action-btn.edit {
            background: var(--warning-color);
        }

        .action-btn.delete {
            background: var(--danger-color);
        }

        .action-btn.add {
            background: var(--success-color);
        }

        .action-btn.minus {
            background: var(--accent-color);
        }

        /* Forms */
        .form-section {
            background: var(--gray-light);
            padding: 40px;
            border-radius: var(--radius);
            margin-bottom: 30px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--dark-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-group label i {
            color: var(--primary-color);
        }

        .form-control {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #ddd;
            border-radius: var(--radius-sm);
            font-family: 'Inter', sans-serif;
            font-size: 15px;
            transition: all 0.3s ease;
            background: white;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(138, 43, 226, 0.1);
        }

        .form-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid #ddd;
        }

        /* Alerts */
        .alert {
            padding: 20px;
            border-radius: var(--radius-sm);
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .alert-success {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid var(--success-color);
            color: var(--success-color);
        }

        .alert-warning {
            background: rgba(255, 152, 0, 0.1);
            border-left: 4px solid var(--warning-color);
            color: var(--warning-color);
        }

        .alert-danger {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid var(--danger-color);
            color: var(--danger-color);
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: white;
            border-radius: var(--radius);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            padding: 30px;
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-dark);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--gray);
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: var(--danger-color);
        }

        .modal-body {
            padding: 30px;
        }

        /* Stock Adjustment */
        .adjustment-input {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .adjustment-input input {
            width: 100px;
            text-align: center;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: var(--radius-sm);
            font-size: 16px;
            font-weight: 600;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                text-align: center;
                gap: 20px;
                padding: 30px 20px;
            }
            
            .header-info {
                text-align: center;
            }
            
            .filter-bar {
                flex-direction: column;
                align-items: stretch;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .quick-actions {
                flex-wrap: wrap;
            }
            
            .content-section {
                padding: 25px;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(138, 43, 226, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* CSV Import */
        .csv-import {
            border: 3px dashed var(--primary-light);
            border-radius: var(--radius);
            padding: 50px;
            text-align: center;
            background: white;
            transition: all 0.3s ease;
            cursor: pointer;
            margin-bottom: 30px;
        }

        .csv-import:hover {
            border-color: var(--primary-color);
            background: var(--primary-light);
        }

        .csv-import i {
            font-size: 48px;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .csv-import h3 {
            color: var(--primary-dark);
            margin-bottom: 10px;
        }

        .csv-import p {
            color: var(--gray);
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-store"></i>
                </div>
                <div class="logo-text">
                    <h1>Estoque Ylma Cake's</h1>
                    <p>Controle inteligente de inventário</p>
                </div>
            </div>
            <div class="header-info">
                <div class="current-date" id="current-date"></div>
                <div class="total-products">
                    <i class="fas fa-box"></i>
                    <span id="total-products-count">0</span> produtos cadastrados
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-grid">
            <!-- Sidebar -->
            <aside class="sidebar">
                <nav class="nav-menu">
                    <button class="nav-item active" data-section="dashboard">
                        <i class="fas fa-chart-line"></i>
                        <span>Dashboard</span>
                    </button>
                    <button class="nav-item" data-section="inventory">
                        <i class="fas fa-boxes"></i>
                        <span>Inventário</span>
                    </button>
                    <button class="nav-item" data-section="adjust">
                        <i class="fas fa-edit"></i>
                        <span>Ajustar Estoque</span>
                    </button>
                    <button class="nav-item" data-section="add">
                        <i class="fas fa-plus-circle"></i>
                        <span>Adicionar Produto</span>
                    </button>
                    <button class="nav-item" data-section="reports">
                        <i class="fas fa-chart-bar"></i>
                        <span>Relatórios</span>
                    </button>
                    <button class="nav-item" data-section="import">
                        <i class="fas fa-file-import"></i>
                        <span>Importar CSV</span>
                    </button>
                </nav>

                <div class="quick-stats">
                    <h3><i class="fas fa-bolt"></i> Visão Rápida</h3>
                    <div class="stat-item">
                        <span>Em Estoque</span>
                        <span class="stat-value" id="quick-in-stock">0</span>
                    </div>
                    <div class="stat-item">
                        <span>Estoque Baixo</span>
                        <span class="stat-value" id="quick-low-stock">0</span>
                    </div>
                    <div class="stat-item">
                        <span>Fora de Estoque</span>
                        <span class="stat-value" id="quick-out-stock">0</span>
                    </div>
                </div>
            </aside>

            <!-- Main Content Area -->
            <main class="main-content">
                <!-- Dashboard Section -->
                <section id="dashboard" class="content-section active-section">
                    <div class="section-header">
                        <h2><i class="fas fa-chart-line"></i> Visão Geral</h2>
                        <button class="btn btn-primary" id="refresh-dashboard">
                            <i class="fas fa-sync-alt"></i> Atualizar
                        </button>
                    </div>

                    <div class="dashboard-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-boxes"></i>
                            </div>
                            <h3>Total de Produtos</h3>
                            <div class="stat-value" id="total-items">0</div>
                        </div>

                        <div class="stat-card success">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <h3>Em Estoque</h3>
                            <div class="stat-value" id="in-stock-items">0</div>
                        </div>

                        <div class="stat-card warning">
                            <div class="stat-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <h3>Estoque Baixo</h3>
                            <div class="stat-value" id="low-stock-items">0</div>
                        </div>

                        <div class="stat-card danger">
                            <div class="stat-icon">
                                <i class="fas fa-times-circle"></i>
                            </div>
                            <h3>Fora de Estoque</h3>
                            <div class="stat-value" id="out-of-stock-items">0</div>
                        </div>

                        <div class="stat-card accent">
                            <div class="stat-icon">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <h3>Valor Total</h3>
                            <div class="stat-value" id="total-value">R$ 0</div>
                        </div>
                    </div>

                    <div class="section-header">
                        <h2><i class="fas fa-exclamation-circle"></i> Produtos que Precisam de Atenção</h2>
                    </div>

                    <div class="alert alert-warning" id="critical-alert">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span id="critical-count">0 produtos</span> precisam de reposição urgente
                    </div>

                    <div class="table-container">
                        <table id="critical-table">
                            <thead>
                                <tr>
                                    <th>Produto</th>
                                    <th>Categoria</th>
                                    <th>Estoque Atual</th>
                                    <th>Estoque Mínimo</th>
                                    <th>Status</th>
                                    <th>Ação Rápida</th>
                                </tr>
                            </thead>
                            <tbody id="critical-items">
                                <!-- Itens críticos serão carregados aqui -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Inventory Section -->
                <section id="inventory" class="content-section">
                    <div class="section-header">
                        <h2><i class="fas fa-boxes"></i> Inventário Completo</h2>
                        <div class="quick-actions">
                            <button class="btn btn-primary" id="export-csv">
                                <i class="fas fa-download"></i> Exportar CSV
                            </button>
                            <button class="btn btn-secondary" id="print-inventory">
                                <i class="fas fa-print"></i> Imprimir
                            </button>
                        </div>
                    </div>

                    <div class="filter-bar">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="search-inventory" placeholder="Buscar produto...">
                        </div>
                        <select class="filter-select" id="category-filter">
                            <option value="">Todas Categorias</option>
                            <!-- Categorias serão carregadas dinamicamente -->
                        </select>
                        <select class="filter-select" id="status-filter">
                            <option value="">Todos Status</option>
                            <option value="in-stock">Em Estoque</option>
                            <option value="low-stock">Estoque Baixo</option>
                            <option value="out-of-stock">Fora de Estoque</option>
                            <option value="not-tracked">Não Controlado</option>
                        </select>
                    </div>

                    <div class="table-container">
                        <table id="inventory-table">
                            <thead>
                                <tr>
                                    <th>Produto</th>
                                    <th>Categoria</th>
                                    <th>Estoque</th>
                                    <th>Mínimo</th>
                                    <th>Preço</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="inventory-items">
                                <!-- Itens do inventário serão carregados aqui -->
                            </tbody>
                        </table>
                    </div>

                    <div class="pagination-info">
                        <p id="pagination-text">Mostrando 0 de 0 produtos</p>
                    </div>
                </section>

                <!-- Adjust Stock Section -->
                <section id="adjust" class="content-section">
                    <div class="section-header">
                        <h2><i class="fas fa-edit"></i> Ajuste de Estoque</h2>
                        <button class="btn btn-primary" id="quick-add-stock">
                            <i class="fas fa-plus"></i> Adicionar em Massa
                        </button>
                    </div>

                    <div class="alert alert-success" id="adjust-success" style="display: none;">
                        <i class="fas fa-check-circle"></i>
                        <span>Estoque ajustado com sucesso!</span>
                    </div>

                    <div class="search-box" style="margin-bottom: 30px;">
                        <i class="fas fa-search"></i>
                        <input type="text" id="search-adjust" placeholder="Buscar produto para ajustar...">
                    </div>

                    <div class="table-container">
                        <table id="adjust-table">
                            <thead>
                                <tr>
                                    <th>Produto</th>
                                    <th>Estoque Atual</th>
                                    <th>Ajuste</th>
                                    <th>Novo Estoque</th>
                                    <th>Ação</th>
                                </tr>
                            </thead>
                            <tbody id="adjust-items">
                                <!-- Itens para ajuste serão carregados aqui -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Add Product Section -->
                <section id="add" class="content-section">
                    <div class="section-header">
                        <h2><i class="fas fa-plus-circle"></i> Adicionar Novo Produto</h2>
                    </div>

                    <div class="form-section">
                        <form id="add-product-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="product-name"><i class="fas fa-tag"></i> Nome do Produto *</label>
                                    <input type="text" id="product-name" class="form-control" placeholder="Ex: Café Expresso" required>
                                </div>
                                <div class="form-group">
                                    <label for="product-category"><i class="fas fa-folder"></i> Categoria *</label>
                                    <select id="product-category" class="form-control" required>
                                        <option value="">Selecione uma categoria</option>
                                        <option value="Bebidas">Bebidas</option>
                                        <option value="Café da Manhã">Café da Manhã</option>
                                        <option value="Almoço">Almoço</option>
                                        <option value="Lanches">Lanches</option>
                                        <option value="Petiscos">Petiscos</option>
                                        <option value="Pastel">Pastel</option>
                                        <option value="Pizza">Pizza</option>
                                        <option value="Sobremesa">Sobremesa</option>
                                        <option value="Espetinho">Espetinho</option>
                                        <option value="Outros">Outros</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="product-stock"><i class="fas fa-box"></i> Quantidade em Estoque</label>
                                    <input type="number" id="product-stock" class="form-control" value="0" min="0">
                                </div>
                                <div class="form-group">
                                    <label for="product-min-stock"><i class="fas fa-exclamation-triangle"></i> Estoque Mínimo</label>
                                    <input type="number" id="product-min-stock" class="form-control" value="5" min="0">
                                </div>
                                <div class="form-group">
                                    <label for="product-price"><i class="fas fa-money-bill-wave"></i> Preço (R$)</label>
                                    <input type="number" id="product-price" class="form-control" value="0.00" min="0" step="0.01">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="product-description"><i class="fas fa-align-left"></i> Descrição</label>
                                <textarea id="product-description" class="form-control" rows="3" placeholder="Descrição do produto..."></textarea>
                            </div>

                            <div class="form-actions">
                                <button type="reset" class="btn btn-secondary">
                                    <i class="fas fa-times"></i> Limpar
                                </button>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i> Salvar Produto
                                </button>
                            </div>
                        </form>
                    </div>

                    <div class="section-header">
                        <h2><i class="fas fa-history"></i> Últimos Produtos Adicionados</h2>
                    </div>

                    <div class="table-container">
                        <table id="recent-products">
                            <thead>
                                <tr>
                                    <th>Produto</th>
                                    <th>Categoria</th>
                                    <th>Estoque</th>
                                    <th>Data</th>
                                </tr>
                            </thead>
                            <tbody id="recent-products-list">
                                <!-- Produtos recentes serão carregados aqui -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Reports Section -->
                <section id="reports" class="content-section">
                    <div class="section-header">
                        <h2><i class="fas fa-chart-bar"></i> Relatórios</h2>
                        <button class="btn btn-primary" id="generate-report">
                            <i class="fas fa-download"></i> Gerar Relatório
                        </button>
                    </div>

                    <div class="form-row" style="margin-bottom: 30px;">
                        <div class="form-group">
                            <label><i class="fas fa-filter"></i> Tipo de Relatório</label>
                            <select id="report-type" class="form-control">
                                <option value="all">Inventário Completo</option>
                                <option value="low">Estoque Baixo</option>
                                <option value="out">Fora de Estoque</option>
                                <option value="category">Por Categoria</option>
                                <option value="value">Maior Valor</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-calendar"></i> Período</label>
                            <select id="report-period" class="form-control">
                                <option value="all">Todo o Período</option>
                                <option value="today">Hoje</option>
                                <option value="week">Esta Semana</option>
                                <option value="month">Este Mês</option>
                            </select>
                        </div>
                    </div>

                    <div class="table-container">
                        <table id="report-table">
                            <thead>
                                <tr>
                                    <th>Produto</th>
                                    <th>Categoria</th>
                                    <th>Estoque</th>
                                    <th>Mínimo</th>
                                    <th>Preço</th>
                                    <th>Valor Total</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="report-items">
                                <!-- Dados do relatório serão carregados aqui -->
                            </tbody>
                        </table>
                    </div>

                    <div class="summary" style="margin-top: 30px; padding: 25px; background: var(--gray-light); border-radius: var(--radius);">
                        <h3 style="margin-bottom: 20px; color: var(--primary-dark);">
                            <i class="fas fa-chart-pie"></i> Resumo do Relatório
                        </h3>
                        <div class="form-row">
                            <div class="stat-card" style="border-left-color: var(--primary-color);">
                                <h3>Valor Total em Estoque</h3>
                                <div class="stat-value" id="report-total-value">R$ 0</div>
                            </div>
                            <div class="stat-card" style="border-left-color: var(--success-color);">
                                <h3>Itens em Estoque</h3>
                                <div class="stat-value" id="report-in-stock">0</div>
                            </div>
                            <div class="stat-card" style="border-left-color: var(--warning-color);">
                                <h3>Itens com Baixo Estoque</h3>
                                <div class="stat-value" id="report-low-stock">0</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Import CSV Section -->
                <section id="import" class="content-section">
                    <div class="section-header">
                        <h2><i class="fas fa-file-import"></i> Importar Dados</h2>
                    </div>

                    <div class="csv-import" id="drop-area">
                        <i class="fas fa-file-csv"></i>
                        <h3>Arraste e solte seu arquivo CSV aqui</h3>
                        <p>ou clique para selecionar</p>
                        <input type="file" id="csv-file" accept=".csv" style="display: none;">
                        <button class="btn btn-primary" id="browse-btn">
                            <i class="fas fa-folder-open"></i> Selecionar Arquivo
                        </button>
                    </div>

                    <div class="alert alert-warning">
                        <i class="fas fa-info-circle"></i>
                        <span>O arquivo CSV deve seguir o formato padrão com as colunas: Nome, Categoria, Estoque, Mínimo, Preço</span>
                    </div>

                    <div class="section-header">
                        <h2><i class="fas fa-database"></i> Dados Atuais do Sistema</h2>
                    </div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Produto</th>
                                    <th>Categoria</th>
                                    <th>Estoque</th>
                                    <th>Mínimo</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="current-data">
                                <!-- Dados atuais serão carregados aqui -->
                            </tbody>
                        </table>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal-overlay" id="edit-modal">
        <div class="modal">
            <div class="modal-header">
                <h3>Editar Produto</h3>
                <button class="modal-close" id="close-edit-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="edit-product-form">
                    <input type="hidden" id="edit-product-id">
                    <div class="form-group">
                        <label for="edit-product-name">Nome do Produto</label>
                        <input type="text" id="edit-product-name" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-product-category">Categoria</label>
                        <select id="edit-product-category" class="form-control" required>
                            <option value="Bebidas">Bebidas</option>
                            <option value="Café da Manhã">Café da Manhã</option>
                            <option value="Almoço">Almoço</option>
                            <option value="Lanches">Lanches</option>
                            <option value="Petiscos">Petiscos</option>
                            <option value="Pastel">Pastel</option>
                            <option value="Pizza">Pizza</option>
                            <option value="Sobremesa">Sobremesa</option>
                            <option value="Espetinho">Espetinho</option>
                            <option value="Outros">Outros</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-product-stock">Estoque</label>
                            <input type="number" id="edit-product-stock" class="form-control" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-product-min-stock">Estoque Mínimo</label>
                            <input type="number" id="edit-product-min-stock" class="form-control" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-product-price">Preço</label>
                            <input type="number" id="edit-product-price" class="form-control" min="0" step="0.01" required>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancel-edit">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Salvar Alterações</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Dados do seu CSV atualizado
        const csvData = `Handle,SKU,Name,Category,Description,Sold by weight,Option 1 name,Option 1 value,Option 2 name,Option 2 value,Option 3 name,Option 3 value,Cost,Barcode,SKU of included item,Quantity of included item,Track stock,Available for sale [Ylma Cake's],Price [Ylma Cake's],In stock [Ylma Cake's],Low stock [Ylma Cake's]
água-com-gás-500ml,10115,Agua com Gás 500ml,Bebidas,,N,,,,,,,0.00,,,,Y,Y,5.00,24.000,
agua-com-gás,10050,Agua sem Gás 500ml,Bebidas,,N,,,,,,,0.00,,,,Y,Y,4.00,37.000,4.000
água-tônica-1,10114,Agua Tônica lata 350ml,Bebidas,,N,,,,,,,0.00,,,,Y,Y,6.50,3.000,2.000
aipim-cozido----charque,10004,Aipim Cozido  - Charque,Café da Manhã,"<p>Carne, ovo, tomate, alface e cebola</p>",N,,,,,,,0.00,,,,N,Y,30.00,,
aipim-cozido---calabresa,10005,Aipim Cozido - Calabresa,Café da Manhã,"<p>Aipim, calabresa, ovo, tomate, alface e cebola</p>",N,,,,,,,0.00,,,,N,Y,30.00,,
aipim-cozido---carne-do-sol,10007,Aipim Cozido - Carne do Sol,Café da Manhã,"<p>Carne, Ovo, tomate, alface e cebola</p>",N,,,,,,,0.00,,,,N,Y,30.00,,
aipim-cozido---fumfito,10008,Aipim Cozido - Fumeiro,Café da Manhã,"<p>Carne de fumeiro, ovo, tomate, alface, cebola</p>",N,,,,,,,0.00,,,,N,Y,30.00,,
aipim-cozido---calabresa-1,10006,Aipim Cozido - Ovos,Café da Manhã,"<p>Ovos, tomate, alface, cebola</p>",N,,,,,,,0.00,,,,N,Y,25.00,,
prato-do-dia-especial,10136,Almoço (Prato do Dia Especial),Almoço,"<p>Refei&ccedil;&otilde;es especiais: Comida baiana, Dobradinha, Feijoada, Lasanha, outros.</p>",N,,,,,,,0.00,,,,N,Y,35.00,,
almoço-(prato-do-dia),10137,Almoço (Prato do Dia)  Frango Assado,Almoço,"<p>Comida caseira: carne bovina, su&iacute;na ou frango - acompanhamentos: feij&atilde;o, arroz, macarr&atilde;o e salada</p>",N,,,,,,,0.00,,,,N,Y,30.00,,
almoço-(prato-do-dia)-bife-à-cavalo,10154,Almoço (Prato do dia) Bife à Cavalo,Almoço,,N,,,,,,,0.00,,,,N,Y,30.00,,
almoço-(prato-do-dia)-bife-acebolado,10140,Almoço (Prato do Dia) Bife Acebolado,Almoço,,N,,,,,,,0.00,,,,N,Y,30.00,,
almoço-(prato-do-dia)-bisteca-suina,10141,Almoço (Prato do Dia) Bisteca Suina,Almoço,,N,,,,,,,0.00,,,,N,Y,30.00,,
almoço-(carne-de-panela),10151,Almoço (Prato do Dia) Carne de Panela,Almoço,,N,,,,,,,0.00,,,,N,Y,30.00,,
almoço-(prato-do-dia)-fígado,10153,Almoço (Prato do Dia) Fígado,Almoço,,N,,,,,,,0.00,,,,N,Y,30.00,,
almoço-(prato-do-dia)-frango-à-passarinho,10155,Almoço (Prato do Dia) Frango à Passarinho,Almoço,,N,,,,,,,0.00,,,,N,Y,30.00,,
almoço-(prado-do-dia)-frango-cozido-c/batata,10143,Almoço (Prato do Dia) Frango Cozido c/batata,Almoço,,N,,,,,,,0.00,,,,N,Y,30.00,,
almoço-(prato-do-dia)-omelete-de-carne-ou-frango,10149,Almoço (Prato do Dia) Omelete de Carne ou Frango,Almoço,,N,,,,,,,0.00,,,,N,Y,30.00,,
almoço-(prato-especial)-camarão-empanado,10152,Almoço (Prato Especial) Camarão empanado,Almoço,,N,,,,,,,0.00,,,,N,Y,variable,,
almoço-(prato-especial)-lasanha-bolonhesa-ou-frango,10156,Almoço (Prato Especial) Lasanha Bolonhesa ou Frango,Almoço,,N,,,,,,,0.00,,,,N,Y,35.00,,
almoço-(prato-especial)-peixe-escabeche-ao-molho-de-camarão,10142,Almoço (Prato Especial) Peixe Escabeche ao molho de Camarão,Almoço,,N,,,,,,,0.00,,,,N,Y,35.00,,
amstel-lata-295ml,10117,Amstel lata 295ml,Bebidas,,N,,,,,,,0.00,,,,N,Y,8.00,,
aquarius-fresh,10047,Aquarius Fresh,Bebidas,,N,,,,,,,0.00,,,,Y,Y,7.50,4.000,1.000
bala-fine,10133,Bala Fine,Lanches,,N,,,,,,,0.00,,,,N,Y,8.99,,
banana-da-terra---porção,10016,Banana da Terra - Porção,Café da Manhã,<p>Por&ccedil;&atilde;o de banana da terra</p>,N,,,,,,,0.00,,,,N,Y,18.00,,
banana-frita,10145,Banana da Terra Frita,Café da Manhã,,N,,,,,,,0.00,,,,N,Y,15.00,,
basta-doce---porção,10015,Batata Doce - Porção,Café da Manhã,<p>Por&ccedil;&atilde;o de batata doce cozida</p>,N,,,,,,,0.00,,,,N,Y,13.00,,
batata-frita---porção,10031,Batata Frita - Porção,Petiscos,,N,,,,,,,0.00,,,,N,Y,20.00,,
bolo-(fatia),10056,Bolo (fatia),Lanches,,N,,,,,,,0.00,,,,N,Y,10.00,,
bolo-de-pote,10057,Bolo de Pote,Lanches,,N,,,,,,,0.00,,,,N,Y,8.00,,
café-com-leite-(média),10074,Café com Leite (média),Bebidas,<p>X&iacute;cara m&eacute;dia de caf&eacute;</p>,N,,,,,,,0.00,,,,N,Y,6.00,,
café-com-leite-(pequeno),10075,Café com Leite (pequeno),Bebidas,<p>X&iacute;cara pequena</p>,N,,,,,,,0.00,,,,N,Y,3.00,,
cafe-expresso,10069,Cafe Expresso,Lanches,,N,,,,,,,0.00,,,,N,Y,5.00,,
café-s/-leite-(pequeno),10076,Café s/ Leite (pequeno),Bebidas,<p>X&iacute;cara pequena</p>,N,,,,,,,0.00,,,,N,Y,2.00,,
café-sem-leite-(média),10077,Café sem Leite (média),Bebidas,<p>X&iacute;cara m&eacute;dia</p>,N,,,,,,,0.00,,,,N,Y,4.00,,
caipirinha-de-abacaxi,10108,Caipirinha de Abacaxi,Bebidas,,N,,,,,,,0.00,,,,N,Y,15.00,,
caipirinha-de-acerola,10109,Caipirinha de Acerola,Bebidas,,N,,,,,,,0.00,,,,N,Y,15.00,,
caipirinha-de-limão-1,10105,Caipirinha de Limão,Bebidas,,N,,,,,,,0.00,,,,N,Y,15.00,,
caipirinha-de-maracujá,10106,Caipirinha de Maracujá,Bebidas,,N,,,,,,,0.00,,,,N,Y,18.00,,
caipirinha-de-tangerina,10107,Caipirinha de Tangerina,Bebidas,,N,,,,,,,0.00,,,,N,Y,15.00,,
caldo-de-sururu,10073,Caldo de Sururu,Petiscos,,N,,,,,,,0.00,,,,N,Y,15.00,,
camarão-encapado,10072,Camarão Encapado,Petiscos,,N,,,,,,,0.00,,,,N,Y,55.00,,
capuccino,10068,Capuccino,Bebidas,,N,,,,,,,0.00,,,,N,Y,9.00,,
cane-do-sol-com-fritas,10139,Carne do Sol com Fritas,Petiscos,<p>Carne do Sol com batatas fritas</p>,N,,,,,,,0.00,,,,N,Y,35.00,,
chá-artesanal-(diversos),10052,Chá Artesanal (diversos),Bebidas,"<p><font dir=""auto"" style=""vertical-align: inherit;""><font dir=""auto"" style=""vertical-align: inherit;"">400 ml</font></font></p>",N,,,,,,,0.00,,,,N,Y,9.00,,
chocolate-gelado,10032,Chocolate Gelado,Bebidas,,N,,,,,,,0.00,,,,N,Y,10.00,,
chocolate-quente,10033,Chocolate Quente,Bebidas,,N,,,,,,,0.00,,,,N,Y,15.00,,
codorna,10071,Codorna,Petiscos,,N,,,,,,,0.00,,,,N,Y,18.00,,
coquetel-de-frutas-(diversas),10096,Coquetel de Frutas (diversas),Bebidas,<p>Coquetel de Frutas sem alcool</p>,N,,,,,,,0.00,,,,N,Y,20.00,,
coxinha,10059,Coxinha,Lanches,,N,,,,,,,0.00,,,,N,Y,8.00,,
coxinha-especial,10060,Coxinha Especial,Lanches,"<p><font dir=""auto"" style=""vertical-align: inherit;""><font dir=""auto"" style=""vertical-align: inherit;"">Cm catupiri ou outros</font></font></p>",N,,,,,,,0.00,,,,N,Y,10.00,,
cupcake,10058,Cupcake,Lanches,,N,,,,,,,0.00,,,,N,Y,5.00,,
cuscuz-com-leite-de-côco,10014,Cuscuz com Leite de Côco,Café da Manhã,,N,,,,,,,0.00,,,,N,Y,18.00,,
cuscuz-de-tapioca,10017,Cuscuz de Tapioca,Café da Manhã,"<p>Tapioca, leite de c&ocirc;co</p>",N,,,,,,,0.00,,,,N,Y,13.00,,
cuscuz-temperado---calabresa,10001,Cuscuz Temperado - Calabresa,Café da Manhã,"<p>Calabresa, ovo, alface tomate, cebola</p>",N,,,,,,,0.00,,,,N,Y,30.00,,
cuscuz-temperado---carne-do-sol,10002,Cuscuz Temperado - Carne do Sol,Café da Manhã,"<p>Carne do Sol, ovo, alface, tomate, cebola</p>",N,,,,,,,0.00,,,,N,Y,30.00,,
cuscuz-temperado---carne-seca,10099,Cuscuz Temperado - Carne Seca,Café da Manhã,"<p>Carne seca, ovo, queijo coalho, tomate e cebola</p>",N,,,,,,,0.00,,,,N,Y,35.00,,
cuscuz-temperado---charque,10000,Cuscuz Temperado - Charque,Café da Manhã,"<p>Charque, ovo, tomate, alface e cebola</p>",N,,,,,,,0.00,,,,N,Y,30.00,,
cuscuz-temperado---fumeiro,10003,Cuscuz Temperado - Fumeiro,Café da Manhã,,N,,,,,,,0.00,,,,N,Y,30.00,,
cuscuz-temperado---ovos,10009,Cuscuz Temperado - Ovos,Café da Manhã,"<p>Dois ovos, tomate, alface e cebola</p>",N,,,,,,,0.00,,,,N,Y,25.00,,
cuscuz-temperado-(pequeno),10147,Cuscuz temperado (pequeno),Café da Manhã,,N,,,,,,,0.00,,,,N,Y,20.00,,
doce-de-leite-(caseiro),10104,Doce de Leite (Caseiro),Sobremesa,<p>Delicioso doce de leite caseiro</p>,N,,,,,,,0.00,,,,N,Y,10.00,,
empada,10062,Empada,Lanches,,N,,,,,,,0.00,,,,N,Y,8.00,,
empada-doce,10063,Empada Doce,Lanches,,N,,,,,,,0.00,,,,N,Y,8.00,,
empada-mini,10157,Empada mini,Lanches,,N,,,,,,,0.00,,,,N,Y,4.00,,
escondidinho-de-camarão,10030,Escondidinho de Camarão,Petiscos,,N,,,,,,,0.00,,,,Y,Y,25.00,0.000,
escondidinho-de-carne-do-sol,10029,Escondidinho de Carne do Sol,Petiscos,,N,,,,,,,0.00,,,,Y,Y,22.00,-2.000,
espetinho---frango,10124,Espetinho - Frango,Espetinho,"<p>Frango, farofa e vinagrete</p>",N,,,,,,,0.00,,,,N,Y,10.00,,
espetinho----medalhão-de-carne,10122,Espetinho - Medalhão de Carne,Espetinho,"<p>Carne, bacon, farofa e vinagrete</p>",N,,,,,,,0.00,,,,N,Y,20.00,,
espetinho---medalhão-frango,10123,Espetinho - Medalhão Frango,Espetinho,"<p>Frango, bacon farofa e vinagrete</p>",N,,,,,,,0.00,,,,N,Y,18.00,,
espetinho-asa-de-frango,10131,Espetinho Asa de Frango,Espetinho,"<p>Asa de Frango, farofa e vinagrete</p>",N,,,,,,,0.00,,,,N,Y,20.00,,
espetinho-de-carne,10148,Espetinho de Carne,Espetinho,"<p>Carne, faofa e vinagrete</p>",N,,,,,,,0.00,,,,N,Y,12.00,,
espetinho-de-coração,10125,Espetinho de Coração,Espetinho,"<p>Cora&ccedil;&atilde;o de ave, farofa e vinagrete</p>",N,,,,,,,0.00,,,,N,Y,14.00,,
espetinho-de-frango,10121,Espetinho Misto,Espetinho,"<p>Carne, frango, farofa e vinagrete</p>",N,,,,,,,0.00,,,,N,Y,14.00,,
h2o,10048,H2O,Bebidas,,N,,,,,,,0.00,,,,N,Y,7.50,,
hambúrguer-artesanal,10013,Hambúrguer Artesanal,Café da Manhã,"<p>P&atilde;o especial, carne, calabresa, bacon, queijo, presunto, tomate, alface e cebola</p>",N,,,,,,,0.00,,,,Y,Y,30.00,0.000,
ice-tea-(chá-gelado)-mate-c/gás,10110,Ice Tea (chá gelado) Mate c/gás,Bebidas,,N,,,,,,,0.00,,,,N,Y,7.50,,
itaipava-350ml,10130,Itaipava 350ml,Bebidas,,N,,,,,,,0.00,,,,N,Y,7.00,,
kibe-frito,10054,Kibe Frito,Lanches,,N,,,,,,,0.00,,,,N,Y,12.00,,
misto-quente,10018,Misto Quente,Café da Manhã,"<p>P&atilde;o, queijo e presunto</p>",N,,,,,,,0.00,,,,N,Y,12.00,,
mousse,10065,Mousse de Limao,Sobremesa,<p>Surpreendente mousse de lim&atilde;o</p>,N,,,,,,,0.00,,,,N,Y,8.00,,
mousse-de-maracujá,10120,Mousse de Maracujá,Sobremesa,<p>Maravilhoso mousse de maracuj&aacute;</p>,N,,,,,,,0.00,,,,N,Y,8.00,,
omelete-de-carne,10020,Omelete de Carne,Café da Manhã,,N,,,,,,,0.00,,,,N,Y,24.00,,
omelete-de-frango,10019,Omelete de Frango,Café da Manhã,,N,,,,,,,0.00,,,,N,Y,22.00,,
ovo-cozido,10128,Ovo Cozido,Café da Manhã,,N,,,,,,,0.00,,,,N,Y,3.00,,
ovo-frito,10098,Ovo Frito,Café da Manhã,<p>Ovo frito</p>,N,,,,,,,0.00,,,,N,Y,3.00,,
pão-com--ovos,10146,Pão com  ovos,Café da Manhã,,N,,,,,,,0.00,,,,N,Y,8.00,,
pão-com-ovos-e-queijo,10144,Pão com ovos e queijo,Lanches,,N,,,,,,,0.00,,,,N,Y,11.00,,
pai-de-alho,10127,Pão de Alho,Espetinho,,N,,,,,,,0.00,,,,N,Y,5.00,,
pao-de-queijo,10066,Pao de Queijo,Lanches,,N,,,,,,,0.00,,,,N,Y,7.00,,
pão-delícia,10067,Pão Delícia,Lanches,,N,,,,,,,0.00,,,,N,Y,11.00,,
camarão,10027,Pastel de Camarão,Pastel,,N,,,,,,,0.00,,,,Y,Y,19.00,0.000,
carne,10023,Pastel de Carne,Pastel,,N,,,,,,,0.00,,,,N,Y,14.00,,
carne-com-queijo,10024,Pastel de Carne com Queijo,Pastel,,N,,,,,,,0.00,,,,N,Y,16.00,,
carne-seca,10026,Pastel de Carne Seca,Pastel,,N,,,,,,,0.00,,,,N,Y,19.00,,
pastel-de-forno,10061,Pastel de Forno,Lanches,,N,,,,,,,0.00,,,,N,Y,8.00,,
frango,10022,Pastel de Frango,Pastel,,N,,,,,,,0.00,,,,N,Y,12.00,,
toscana-com-requeijão,10021,Pastel de Toscana com Requeijão,Pastel,,N,,,,,,,0.00,,,,Y,Y,15.00,0.000,
misto,10025,Pastel Misto,Pastel,,N,,,,,,,0.00,,,,N,Y,14.00,,
pastel-três-queijos,10028,Pastel Três Queijos,Pastel,,N,,,,,,,0.00,,,,Y,Y,17.00,0.000,
pizza-de-atum-(brotinho),10093,Pizza de Atum (Brotinho),Pizza,<p>molho de tomate e mussarela e cebola</p>,N,,,,,,,0.00,,,,N,Y,19.00,,
pizza-de-atum-(grande),10087,Pizza de Atum (Grande),Pizza,<p>molho de tomate e mussarela</p>,N,,,,,,,0.00,,,,N,Y,55.00,,
pizza-de-calabresa-(brotinho),10090,Pizza de Calabresa (Brotinho),Pizza,<p>molho de tomate e mussarela</p>,N,,,,,,,0.00,,,,N,Y,15.00,,
pizza-de-calabresa-(grande),10081,Pizza de Calabresa (Grande),Pizza,<p>Molho de Tomate e Mussarela</p>,N,,,,,,,0.00,,,,N,Y,42.00,,
pizza-de-camarão-(grande),10086,Pizza de Camarão (Grande),Pizza,<p>molho de tomate e mussarela</p>,N,,,,,,,0.00,,,,N,Y,60.00,,
pizza-de-frango-(grande),10089,Pizza de Frango (Grande),Pizza,<p>molho de tomate e mussarela</p>,N,,,,,,,0.00,,,,N,Y,40.00,,
pizza-de-frango-com-bacon-e-catupiri-(grande),10083,Pizza de Frango com Bacon e catupiry(Grande),Pizza,<p>Molho de tomate e mussarela</p>,N,,,,,,,0.00,,,,N,Y,46.00,,
pizza-de-frango-com-catupiry-(brotinho),10091,Pizza de Frango com Catupiry (brotinho),Pizza,<p>molho de tomate e mussarela</p>,N,,,,,,,0.00,,,,N,Y,17.00,,
pizza-de-frango-com-catupiri-(grande),10082,Pizza de Frango com Catupiry (Grande),Pizza,<p>Molho de tomate e mussarela</p>,N,,,,,,,0.00,,,,N,Y,45.00,,
pizza-portuguesa-(brotinho),10092,Pizza Portuguesa (Brotinho),Pizza,"<p>presunto, ovo, cebola, or&eacute;gano&nbsp; e azeitona</p>",N,,,,,,,0.00,,,,N,Y,18.00,,
pizza-portuguesa,10084,Pizza Portuguesa (Grande),Pizza,"<p>Presunto, ovo, tomate, cebola, or&eacute;gano e azeitona</p>",N,,,,,,,0.00,,,,N,Y,40.00,,
pizza-sertaneja-(grande),10088,Pizza Sertaneja (Grande),Pizza,"<p>carne seca, queijo coalho e banana da terra</p>",N,,,,,,,0.00,,,,N,Y,55.00,,
pizza-três-queijos-(brotinho),10094,Pizza Três Queijos (brotinho),Pizza,"<p>provolone, gorgonzola e queijo coalho&nbsp;</p>",N,,,,,,,0.00,,,,N,Y,20.00,,
pizza-três-queijos,10085,Pizza Três Queijos (Grande),Pizza,"<p>provolone, gorgonzola e queijo coalho</p>",N,,,,,,,0.00,,,,N,Y,60.00,,
pudim,10064,Pudim,Sobremesa,,N,,,,,,,0.00,,,,N,Y,5.00,,
queijo-coalho,10126,Queijo coalho,Espetinho,,N,,,,,,,0.00,,,,N,Y,14.00,,
refrigerante-1-litro,10097,Refrigerante 1 litro (Coca cola),Bebidas,<p>Coca Cola</p>,N,,,,,,,0.00,,,,Y,Y,10.00,2.000,3.000
refrigerante-1-litro-fanta,10046,Refrigerante 1 litro (Fanta),Bebidas,,N,,,,,,,0.00,,,,Y,Y,10.00,12.000,
refrigerante-lata,10045,Refrigerante Lata 350ml Coca Cola,Bebidas,"<p>Coca, Fanta, Guaran&aacute;, Lim&atilde;o 350ml</p>",N,,,,,,,0.00,,,,Y,Y,6.00,8.000,3.000
refrigerante-lata-sprite-350ml,10113,Refrigerante Lata 350ml Sprite,Bebidas,,N,,,,,,,0.00,,,,Y,Y,6.00,19.000,
refrigerante-limon-fresh,10116,Refrigerante Limon Fresh,Bebidas,,N,,,,,,,0.00,,,,N,Y,7.50,,
refrigerante-pet-200ml-coca-cola,10051,Refrigerante pet 200ml Coca Cola,Bebidas,,N,,,,,,,0.00,,,,Y,Y,3.00,12.000,3.000
refrigerante-pet-200ml-lar,10111,Refrigerante pet 200ml Fanta,Bebidas,,N,,,,,,,0.00,,,,Y,Y,3.00,12.000,3.000
refrigerante-pet-600ml-coca-cola,10049,Refrigerante pet 600ml Coca Cola,Bebidas,,N,,,,,,,0.00,,,,Y,Y,7.50,3.000,3.000
refrigertante-lata-350ml--lar,10112,Refrigertante Lata 350ml  (Fanta),Bebidas,,N,,,,,,,0.00,,,,Y,Y,6.00,15.000,
roska-de-abacaxi,10101,Roska de Abacaxi,Bebidas,,N,,,,,,,0.00,,,,N,Y,18.00,,
roska-de-acerola,10103,Roska de Acerola,Bebidas,,N,,,,,,,0.00,,,,N,Y,18.00,,
roska-de-kiwi,10080,Roska de Kiwi,Bebidas,,N,,,,,,,0.00,,,,N,Y,28.00,,
roska-de-limão,10078,Roska de Limão,Bebidas,,N,,,,,,,0.00,,,,N,Y,18.00,,
roska-de-maracujá,10100,Roska de Maracujá,Bebidas,,N,,,,,,,0.00,,,,N,Y,20.00,,
roska-de-morango,10079,Roska de Morango,Bebidas,,N,,,,,,,0.00,,,,N,Y,28.00,,
roska-de-tangerina,10102,Roska de Tangerina,Bebidas,,N,,,,,,,0.00,,,,N,Y,18.00,,
roska-de-umbu,10095,Roska de Umbu,Bebidas,,N,,,,,,,0.00,,,,N,Y,18.00,,
saladinho,10138,Salgadinho,Lanches,,N,,,,,,,0.00,,,,N,Y,2.50,,
salgados-diversos,10150,Salgados Diversos,Lanches,,N,,,,,,,0.00,,,,N,Y,12.00,,
sanduíche-de-franga,10012,Sanduíche de Frango,Café da Manhã,"<p>P&atilde;o baguete, frango, bacon, calabresa, mussarela, tomate,alface e cebola</p>",N,,,,,,,0.00,,,,N,Y,28.00,,
sanduíche-de-picanha,10011,Sanduíche de Picanha,Café da Manhã,"<p>P&atilde;o baguete, picanha, bacon, requeij&atilde;o, tomate, alface e cebola</p>",N,,,,,,,0.00,,,,N,Y,35.00,,
sanduíche-de-toscana,10010,Sanduíche de Toscana,Café da Manhã,"<p>P&atilde;o baguete, toscana, queijo, tomate, alface e cebola</p>",N,,,,,,,0.00,,,,Y,Y,22.00,0.000,
skol-lata,10132,Skol lata,Bebidas,,N,,,,,,,0.00,,,,N,Y,7.00,,
suco-de-abacaxi,10034,Suco de Abacaxi 500ml,Bebidas,,N,,,,,,,0.00,,,,N,Y,12.00,,
suco-de-frutas-(jarra),10043,Suco de Frutas  Jarra 900ml,Bebidas,,N,,,,,,,0.00,,,,N,Y,25.00,,
suco-de-frutas-(copo),10042,Suco de Frutas 300ml,Bebidas,,N,,,,,,,0.00,,,,N,Y,15.00,,
suco-de-laranja-(copo),10035,Suco de Laranja 300ml,Bebidas,,N,,,,,,,0.00,,,,N,Y,10.00,,
suco-de-laranja-jarra-500ml,10135,Suco de Laranja 500ml,Bebidas,,N,,,,,,,0.00,,,,N,Y,12.00,,
suco-de-laranja-(jarra),10036,Suco de Laranja Jarra  900ml,Bebidas,,N,,,,,,,0.00,,,,N,Y,19.00,,
suco-de-limão,10037,Suco de Limão 300ml,Bebidas,,N,,,,,,,0.00,,,,N,Y,10.00,,
suco-de-limão-(jarra),10044,Suco de Limão Jarra 900ml,Bebidas,,N,,,,,,,0.00,,,,N,Y,18.00,,
suco-de-maracujá-(copo),10038,Suco de Maracujá 500ml,Bebidas,,N,,,,,,,0.00,,,,N,Y,14.00,,
suco-de-maracujá-(jarra),10039,Suco de Maracujá Jarra 900ml,Bebidas,,N,,,,,,,0.00,,,,N,Y,25.00,,
suco-de-morango-(copo),10041,Suco de Morango 500ml,Bebidas,,N,,,,,,,0.00,,,,N,Y,17.00,,
suco-de-morango-(jarra),10040,Suco de Morango Jarra 900ml,Bebidas,,N,,,,,,,0.00,,,,N,Y,30.00,,
suco-del-vale,10053,Suco Del Vale,Bebidas,,N,,,,,,,0.00,,,,N,Y,6.00,,
tapioca-com-frango,10158,Tapioca com Frango,Café da Manhã,<p>Tapioca com frango desfiado&nbsp;</p>,N,,,,,,,0.00,,,,N,Y,12.00,,
tapioca-com-ovos,10129,Tapioca com ovos,Café da Manhã,,N,,,,,,,0.00,,,,N,Y,12.00,,
tapioca-mista,10134,Tapioca Mista,Café da Manhã,,N,,,,,,,0.00,,,,N,Y,12.00,,
torta-(fatia),10055,Torta (fatia),Lanches,,N,,,,,,,0.00,,,,N,Y,18.00,,
torta-de-limão,10119,Torta de Limão,Lanches,<p>Torta sabor lim&atilde;o</p>,N,,,,,,,0.00,,,,N,Y,14.00,,
torta-de-maracujá,10118,Torta de Maracujá,Lanches,<p>Torta com sabor maracuj&aacute;</p>,N,,,,,,,0.00,,,,N,Y,14.00,,
vitamina-(diversas),10070,Vitamina (diversas),Lanches,,N,,,,,,,0.00,,,,N,Y,12.00,,`;

        // Sistema de Estoque
        let inventory = [];
        let nextId = 1;
        let recentProducts = [];
        let pendingAdjustments = new Map();

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar data atual
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('current-date').textContent = now.toLocaleDateString('pt-BR', options);
            
            // Carregar dados do CSV
            processCSVData(csvData);
            
            // Configurar navegação
            setupNavigation();
            
            // Configurar eventos
            setupEventListeners();
            
            // Inicializar dashboard
            updateDashboard();
            renderInventoryTable();
            loadCategories();
            
            // Mostrar notificação inicial
            showAlert(`Sistema carregado com ${inventory.length} produtos!`, 'success');
        });

        // Processar dados CSV
        function processCSVData(csvString) {
            const lines = csvString.split('\n');
            const headers = lines[0].split(',');
            
            inventory = [];
            
            for (let i = 1; i < lines.length; i++) {
                if (!lines[i].trim()) continue;
                
                const values = parseCSVLine(lines[i]);
                if (values.length < headers.length) continue;
                
                const product = {
                    id: nextId++,
                    handle: values[0] || '',
                    sku: values[1] || '',
                    name: values[2] || '',
                    category: values[3] || 'Outros',
                    description: values[4] || '',
                    price: parseFloat(values[18] || 0),
                    stock: parseFloat(values[19] || 0),
                    minStock: parseFloat(values[20] || 0),
                    trackStock: values[16] === 'Y',
                    available: values[17] === 'Y',
                    createdAt: new Date().toISOString().split('T')[0],
                    lastUpdated: new Date().toISOString().split('T')[0]
                };
                
                // Corrigir valores
                if (product.stock < 0) product.stock = 0;
                if (product.minStock < 0) product.minStock = 0;
                
                inventory.push(product);
            }
            
            saveToLocalStorage();
        }

        // Parse de linha CSV
        function parseCSVLine(line) {
            const result = [];
            let current = '';
            let inQuotes = false;
            
            for (let i = 0; i < line.length; i++) {
                const char = line[i];
                
                if (char === '"') {
                    inQuotes = !inQuotes;
                } else if (char === ',' && !inQuotes) {
                    result.push(current);
                    current = '';
                } else {
                    current += char;
                }
            }
            
            result.push(current);
            return result;
        }

        // Configurar navegação
        function setupNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const sectionId = this.getAttribute('data-section');
                    
                    // Atualizar navegação
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Mostrar seção correspondente
                    document.querySelectorAll('.content-section').forEach(section => {
                        section.classList.remove('active-section');
                    });
                    document.getElementById(sectionId).classList.add('active-section');
                    
                    // Atualizar dados específicos da seção
                    switch(sectionId) {
                        case 'dashboard':
                            updateDashboard();
                            break;
                        case 'inventory':
                            renderInventoryTable();
                            break;
                        case 'adjust':
                            renderAdjustTable();
                            break;
                        case 'reports':
                            generateReport();
                            break;
                        case 'import':
                            renderCurrentData();
                            break;
                    }
                });
            });
        }

        // Configurar eventos
        function setupEventListeners() {
            // Atualizar dashboard
            document.getElementById('refresh-dashboard').addEventListener('click', updateDashboard);
            
            // Exportar CSV
            document.getElementById('export-csv').addEventListener('click', exportToCSV);
            
            // Imprimir inventário
            document.getElementById('print-inventory').addEventListener('click', printInventory);
            
            // Filtros do inventário
            document.getElementById('search-inventory').addEventListener('input', renderInventoryTable);
            document.getElementById('category-filter').addEventListener('change', renderInventoryTable);
            document.getElementById('status-filter').addEventListener('change', renderInventoryTable);
            
            // Buscar na seção de ajuste
            document.getElementById('search-adjust').addEventListener('input', renderAdjustTable);
            
            // Adicionar produto
            document.getElementById('add-product-form').addEventListener('submit', handleAddProduct);
            
            // Adicionar em massa
            document.getElementById('quick-add-stock').addEventListener('click', showBulkAddModal);
            
            // Gerar relatório
            document.getElementById('generate-report').addEventListener('click', generateReport);
            document.getElementById('report-type').addEventListener('change', generateReport);
            document.getElementById('report-period').addEventListener('change', generateReport);
            
            // Importar CSV
            document.getElementById('browse-btn').addEventListener('click', () => {
                document.getElementById('csv-file').click();
            });
            document.getElementById('csv-file').addEventListener('change', handleFileImport);
            
            // Drag and drop
            const dropArea = document.getElementById('drop-area');
            dropArea.addEventListener('dragover', handleDragOver);
            dropArea.addEventListener('dragleave', handleDragLeave);
            dropArea.addEventListener('drop', handleDrop);
            
            // Modal de edição
            document.getElementById('close-edit-modal').addEventListener('click', closeEditModal);
            document.getElementById('cancel-edit').addEventListener('click', closeEditModal);
            document.getElementById('edit-product-form').addEventListener('submit', handleEditProduct);
            
            // Fechar modal ao clicar fora
            document.getElementById('edit-modal').addEventListener('click', function(e) {
                if (e.target === this) closeEditModal();
            });
        }

        // Atualizar dashboard
        function updateDashboard() {
            const totalItems = inventory.length;
            const inStockItems = inventory.filter(item => getStockStatus(item) === 'in-stock').length;
            const lowStockItems = inventory.filter(item => getStockStatus(item) === 'low-stock').length;
            const outOfStockItems = inventory.filter(item => getStockStatus(item) === 'out-of-stock').length;
            
            // Calcular valor total
            const totalValue = inventory.reduce((sum, item) => {
                return sum + (item.stock * item.price);
            }, 0);
            
            // Atualizar estatísticas
            document.getElementById('total-items').textContent = totalItems;
            document.getElementById('in-stock-items').textContent = inStockItems;
            document.getElementById('low-stock-items').textContent = lowStockItems;
            document.getElementById('out-of-stock-items').textContent = outOfStockItems;
            document.getElementById('total-value').textContent = `R$ ${totalValue.toFixed(2)}`;
            
            // Atualizar visão rápida na sidebar
            document.getElementById('total-products-count').textContent = totalItems;
            document.getElementById('quick-in-stock').textContent = inStockItems;
            document.getElementById('quick-low-stock').textContent = lowStockItems;
            document.getElementById('quick-out-stock').textContent = outOfStockItems;
            
            // Atualizar itens críticos
            updateCriticalItems();
            
            // Atualizar produtos recentes
            updateRecentProducts();
        }

        // Atualizar itens críticos
        function updateCriticalItems() {
            const criticalItems = inventory.filter(item => 
                getStockStatus(item) === 'low-stock' || 
                getStockStatus(item) === 'out-of-stock'
            );
            
            document.getElementById('critical-count').textContent = `${criticalItems.length} produtos`;
            
            const tableBody = document.getElementById('critical-items');
            tableBody.innerHTML = '';
            
            criticalItems.slice(0, 10).forEach(item => {
                const status = getStockStatus(item);
                const statusText = getStatusText(status);
                const statusClass = getStatusClass(status);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${item.name}</strong></td>
                    <td>${item.category}</td>
                    <td>${formatNumber(item.stock)}</td>
                    <td>${formatNumber(item.minStock)}</td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn add" onclick="quickAdjustStock(${item.id}, 10)">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="action-btn minus" onclick="quickAdjustStock(${item.id}, -1)">
                                <i class="fas fa-minus"></i>
                            </button>
                        </div>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Atualizar produtos recentes
        function updateRecentProducts() {
            const recent = [...recentProducts].reverse().slice(0, 5);
            const tableBody = document.getElementById('recent-products-list');
            tableBody.innerHTML = '';
            
            recent.forEach(product => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${product.name}</td>
                    <td>${product.category}</td>
                    <td>${formatNumber(product.stock)}</td>
                    <td>${product.createdAt}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Renderizar tabela de inventário
        function renderInventoryTable() {
            const searchTerm = document.getElementById('search-inventory').value.toLowerCase();
            const categoryFilter = document.getElementById('category-filter').value;
            const statusFilter = document.getElementById('status-filter').value;
            
            const filteredItems = inventory.filter(item => {
                const matchesSearch = item.name.toLowerCase().includes(searchTerm) || 
                                     item.category.toLowerCase().includes(searchTerm);
                const matchesCategory = !categoryFilter || item.category === categoryFilter;
                const matchesStatus = !statusFilter || getStockStatus(item) === statusFilter;
                
                return matchesSearch && matchesCategory && matchesStatus;
            });
            
            const tableBody = document.getElementById('inventory-items');
            tableBody.innerHTML = '';
            
            filteredItems.forEach(item => {
                const status = getStockStatus(item);
                const statusText = getStatusText(status);
                const statusClass = getStatusClass(status);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <strong>${item.name}</strong>
                        ${item.description ? `<br><small style="color: var(--gray);">${stripHTML(item.description)}</small>` : ''}
                    </td>
                    <td>${item.category}</td>
                    <td>${formatNumber(item.stock)}</td>
                    <td>${formatNumber(item.minStock)}</td>
                    <td>R$ ${formatNumber(item.price, 2)}</td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn edit" onclick="openEditModal(${item.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn add" onclick="quickAdjustStock(${item.id}, 1)">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="action-btn minus" onclick="quickAdjustStock(${item.id}, -1)">
                                <i class="fas fa-minus"></i>
                            </button>
                        </div>
                    </td>
                `;
                tableBody.appendChild(row);
            });
            
            document.getElementById('pagination-text').textContent = 
                `Mostrando ${filteredItems.length} de ${inventory.length} produtos`;
        }

        // Renderizar tabela de ajuste
        function renderAdjustTable() {
            const searchTerm = document.getElementById('search-adjust').value.toLowerCase();
            const filteredItems = inventory.filter(item => 
                item.name.toLowerCase().includes(searchTerm)
            );
            
            const tableBody = document.getElementById('adjust-items');
            tableBody.innerHTML = '';
            
            filteredItems.forEach(item => {
                const pendingAdjustment = pendingAdjustments.get(item.id) || 0;
                const newStock = item.stock + pendingAdjustment;
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <strong>${item.name}</strong><br>
                        <small style="color: var(--gray);">${item.category}</small>
                    </td>
                    <td>${formatNumber(item.stock)}</td>
                    <td>
                        <div class="adjustment-input">
                            <button class="btn btn-icon btn-secondary" onclick="updateAdjustment(${item.id}, -1)">-</button>
                            <input type="number" 
                                   id="adjust-input-${item.id}" 
                                   value="${pendingAdjustment}"
                                   onchange="updateAdjustmentInput(${item.id}, this.value)"
                                   style="width: 80px; text-align: center;">
                            <button class="btn btn-icon btn-secondary" onclick="updateAdjustment(${item.id}, 1)">+</button>
                        </div>
                    </td>
                    <td>${formatNumber(newStock)}</td>
                    <td>
                        <button class="btn btn-small btn-success" onclick="applyAdjustment(${item.id})">
                            <i class="fas fa-check"></i> Aplicar
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="clearAdjustment(${item.id})">
                            <i class="fas fa-times"></i>
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Ajuste rápido de estoque
        function quickAdjustStock(itemId, amount) {
            const itemIndex = inventory.findIndex(item => item.id === itemId);
            
            if (itemIndex !== -1) {
                inventory[itemIndex].stock += amount;
                if (inventory[itemIndex].stock < 0) inventory[itemIndex].stock = 0;
                
                inventory[itemIndex].lastUpdated = new Date().toISOString().split('T')[0];
                saveToLocalStorage();
                
                updateDashboard();
                renderInventoryTable();
                renderAdjustTable();
                
                showAlert(`Estoque ajustado: ${amount > 0 ? '+' : ''}${amount} unidade(s)`, 'success');
            }
        }

        // Atualizar ajuste
        function updateAdjustment(itemId, amount) {
            const current = pendingAdjustments.get(itemId) || 0;
            pendingAdjustments.set(itemId, current + amount);
            renderAdjustTable();
        }

        function updateAdjustmentInput(itemId, value) {
            const adjustment = parseInt(value) || 0;
            pendingAdjustments.set(itemId, adjustment);
            renderAdjustTable();
        }

        function applyAdjustment(itemId) {
            const adjustment = pendingAdjustments.get(itemId) || 0;
            const itemIndex = inventory.findIndex(item => item.id === itemId);
            
            if (itemIndex !== -1) {
                inventory[itemIndex].stock += adjustment;
                if (inventory[itemIndex].stock < 0) inventory[itemIndex].stock = 0;
                
                inventory[itemIndex].lastUpdated = new Date().toISOString().split('T')[0];
                pendingAdjustments.delete(itemId);
                saveToLocalStorage();
                
                updateDashboard();
                renderInventoryTable();
                renderAdjustTable();
                
                document.getElementById('adjust-success').style.display = 'flex';
                setTimeout(() => {
                    document.getElementById('adjust-success').style.display = 'none';
                }, 3000);
                
                showAlert(`Estoque ajustado para ${inventory[itemIndex].stock} unidades`, 'success');
            }
        }

        function clearAdjustment(itemId) {
            pendingAdjustments.delete(itemId);
            renderAdjustTable();
        }

        // Adicionar novo produto
        function handleAddProduct(e) {
            e.preventDefault();
            
            const name = document.getElementById('product-name').value;
            const category = document.getElementById('product-category').value;
            const stock = parseInt(document.getElementById('product-stock').value) || 0;
            const minStock = parseInt(document.getElementById('product-min-stock').value) || 5;
            const price = parseFloat(document.getElementById('product-price').value) || 0;
            const description = document.getElementById('product-description').value;
            
            const newProduct = {
                id: nextId++,
                name,
                category,
                stock,
                minStock,
                price,
                description,
                trackStock: true,
                available: true,
                createdAt: new Date().toISOString().split('T')[0],
                lastUpdated: new Date().toISOString().split('T')[0]
            };
            
            inventory.push(newProduct);
            recentProducts.push(newProduct);
            saveToLocalStorage();
            
            // Limpar formulário
            document.getElementById('add-product-form').reset();
            
            // Atualizar interface
            updateDashboard();
            renderInventoryTable();
            loadCategories();
            
            // Mostrar sucesso
            showAlert(`Produto "${name}" adicionado com sucesso!`, 'success');
        }

        // Abrir modal de edição
        function openEditModal(itemId) {
            const item = inventory.find(item => item.id === itemId);
            
            if (!item) return;
            
            document.getElementById('edit-product-id').value = item.id;
            document.getElementById('edit-product-name').value = item.name;
            document.getElementById('edit-product-category').value = item.category;
            document.getElementById('edit-product-stock').value = item.stock;
            document.getElementById('edit-product-min-stock').value = item.minStock;
            document.getElementById('edit-product-price').value = item.price;
            
            document.getElementById('edit-modal').classList.add('active');
        }

        function closeEditModal() {
            document.getElementById('edit-modal').classList.remove('active');
            document.getElementById('edit-product-form').reset();
        }

        function handleEditProduct(e) {
            e.preventDefault();
            
            const id = parseInt(document.getElementById('edit-product-id').value);
            const name = document.getElementById('edit-product-name').value;
            const category = document.getElementById('edit-product-category').value;
            const stock = parseInt(document.getElementById('edit-product-stock').value) || 0;
            const minStock = parseInt(document.getElementById('edit-product-min-stock').value) || 0;
            const price = parseFloat(document.getElementById('edit-product-price').value) || 0;
            
            const itemIndex = inventory.findIndex(item => item.id === id);
            
            if (itemIndex !== -1) {
                inventory[itemIndex].name = name;
                inventory[itemIndex].category = category;
                inventory[itemIndex].stock = stock;
                inventory[itemIndex].minStock = minStock;
                inventory[itemIndex].price = price;
                inventory[itemIndex].lastUpdated = new Date().toISOString().split('T')[0];
                
                saveToLocalStorage();
                
                updateDashboard();
                renderInventoryTable();
                renderAdjustTable();
                closeEditModal();
                
                showAlert(`Produto "${name}" atualizado com sucesso!`, 'success');
            }
        }

        // Carregar categorias
        function loadCategories() {
            const categories = new Set(inventory.map(item => item.category).filter(Boolean));
            const select = document.getElementById('category-filter');
            
            // Limpar opções antigas (exceto "Todas Categorias")
            while (select.options.length > 1) {
                select.remove(1);
            }
            
            // Adicionar novas categorias
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                select.appendChild(option);
            });
        }

        // Gerar relatório
        function generateReport() {
            const reportType = document.getElementById('report-type').value;
            const period = document.getElementById('report-period').value;
            
            let filteredItems = [...inventory];
            
            // Filtrar por tipo
            switch(reportType) {
                case 'low':
                    filteredItems = filteredItems.filter(item => getStockStatus(item) === 'low-stock');
                    break;
                case 'out':
                    filteredItems = filteredItems.filter(item => getStockStatus(item) === 'out-of-stock');
                    break;
                case 'value':
                    filteredItems.sort((a, b) => (b.stock * b.price) - (a.stock * a.price));
                    break;
                case 'category':
                    filteredItems.sort((a, b) => a.category.localeCompare(b.category));
                    break;
            }
            
            // Atualizar tabela de relatório
            const tableBody = document.getElementById('report-items');
            tableBody.innerHTML = '';
            
            let totalValue = 0;
            let inStockCount = 0;
            let lowStockCount = 0;
            
            filteredItems.forEach(item => {
                const status = getStockStatus(item);
                const statusText = getStatusText(status);
                const statusClass = getStatusClass(status);
                const itemValue = item.stock * item.price;
                
                totalValue += itemValue;
                if (status === 'in-stock') inStockCount++;
                if (status === 'low-stock') lowStockCount++;
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.name}</td>
                    <td>${item.category}</td>
                    <td>${formatNumber(item.stock)}</td>
                    <td>${formatNumber(item.minStock)}</td>
                    <td>R$ ${formatNumber(item.price, 2)}</td>
                    <td>R$ ${formatNumber(itemValue, 2)}</td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                `;
                tableBody.appendChild(row);
            });
            
            // Atualizar resumo
            document.getElementById('report-total-value').textContent = `R$ ${totalValue.toFixed(2)}`;
            document.getElementById('report-in-stock').textContent = inStockCount;
            document.getElementById('report-low-stock').textContent = lowStockCount;
        }

        // Exportar para CSV
        function exportToCSV() {
            const headers = ['Nome', 'Categoria', 'Estoque', 'Estoque Mínimo', 'Preço', 'Status'];
            const csvData = inventory.map(item => [
                `"${item.name}"`,
                `"${item.category}"`,
                item.stock,
                item.minStock,
                item.price,
                getStockStatus(item) === 'in-stock' ? 'Em Estoque' : 
                getStockStatus(item) === 'low-stock' ? 'Estoque Baixo' : 'Fora de Estoque'
            ]);
            
            const csvContent = [
                headers.join(','),
                ...csvData.map(row => row.join(','))
            ].join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `estoque-ylma-cakes-${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
            
            showAlert('CSV exportado com sucesso!', 'success');
        }

        // Imprimir inventário
        function printInventory() {
            window.print();
        }

        // Importação de arquivo
        function handleFileImport(event) {
            const file = event.target.files[0];
            if (file) {
                readCSVFile(file);
            }
        }

        function handleDragOver(event) {
            event.preventDefault();
            document.getElementById('drop-area').style.borderColor = 'var(--primary-color)';
            document.getElementById('drop-area').style.background = 'var(--primary-light)';
        }

        function handleDragLeave(event) {
            event.preventDefault();
            document.getElementById('drop-area').style.borderColor = '';
            document.getElementById('drop-area').style.background = '';
        }

        function handleDrop(event) {
            event.preventDefault();
            handleDragLeave(event);
            
            const file = event.dataTransfer.files[0];
            if (file && file.name.endsWith('.csv')) {
                readCSVFile(file);
            } else {
                showAlert('Por favor, selecione um arquivo CSV válido', 'warning');
            }
        }

        function readCSVFile(file) {
            const reader = new FileReader();
            
            reader.onload = function(e) {
                const csvContent = e.target.result;
                processCSVData(csvContent);
                
                updateDashboard();
                renderInventoryTable();
                loadCategories();
                
                showAlert(`Arquivo "${file.name}" importado com sucesso!`, 'success');
            };
            
            reader.readAsText(file);
        }

        // Renderizar dados atuais
        function renderCurrentData() {
            const tableBody = document.getElementById('current-data');
            tableBody.innerHTML = '';
            
            inventory.slice(0, 10).forEach(item => {
                const status = getStockStatus(item);
                const statusText = getStatusText(status);
                const statusClass = getStatusClass(status);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.name}</td>
                    <td>${item.category}</td>
                    <td>${formatNumber(item.stock)}</td>
                    <td>${formatNumber(item.minStock)}</td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Funções auxiliares
        function getStockStatus(item) {
            if (!item.trackStock) return 'not-tracked';
            if (item.stock <= 0) return 'out-of-stock';
            if (item.stock <= item.minStock) return 'low-stock';
            return 'in-stock';
        }

        function getStatusText(status) {
            switch(status) {
                case 'in-stock': return 'Em Estoque';
                case 'low-stock': return 'Estoque Baixo';
                case 'out-of-stock': return 'Fora de Estoque';
                case 'not-tracked': return 'Não Controlado';
                default: return 'Desconhecido';
            }
        }

        function getStatusClass(status) {
            switch(status) {
                case 'in-stock': return 'status-in-stock';
                case 'low-stock': return 'status-low-stock';
                case 'out-of-stock': return 'status-out-of-stock';
                case 'not-tracked': return 'status-not-tracked';
                default: return '';
            }
        }

        function formatNumber(value, decimals = 0) {
            if (isNaN(value)) return '0';
            return parseFloat(value).toFixed(decimals);
        }

        function stripHTML(html) {
            const tmp = document.createElement('div');
            tmp.innerHTML = html;
            return tmp.textContent || tmp.innerText || '';
        }

        function saveToLocalStorage() {
            localStorage.setItem('ylma-cakes-inventory', JSON.stringify({
                inventory,
                nextId,
                recentProducts: recentProducts.slice(-20) // Guardar últimos 20 produtos
            }));
        }

        function loadFromLocalStorage() {
            const saved = localStorage.getItem('ylma-cakes-inventory');
            if (saved) {
                const data = JSON.parse(saved);
                inventory = data.inventory || [];
                nextId = data.nextId || inventory.length + 1;
                recentProducts = data.recentProducts || [];
            }
        }

        function showAlert(message, type = 'success') {
            // Implementação simples de notificação
            alert(`${type === 'success' ? '✅' : type === 'warning' ? '⚠️' : '❌'} ${message}`);
        }

        function showBulkAddModal() {
            const amount = prompt('Quantidade a adicionar para todos os produtos com estoque baixo:');
            if (amount && !isNaN(amount)) {
                const qty = parseInt(amount);
                let count = 0;
                
                inventory.forEach(item => {
                    if (getStockStatus(item) === 'low-stock' || getStockStatus(item) === 'out-of-stock') {
                        item.stock += qty;
                        item.lastUpdated = new Date().toISOString().split('T')[0];
                        count++;
                    }
                });
                
                saveToLocalStorage();
                updateDashboard();
                renderInventoryTable();
                renderAdjustTable();
                
                showAlert(`${qty} unidades adicionadas para ${count} produtos`, 'success');
            }
        }
    </script>
</body>
</html>